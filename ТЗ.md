# ТЕХНИЧЕСКОЕ ЗАДАНИЕ (ТЗ) НА РАЗРАБОТКУ ИГРЫ
**Название проекта:** Операция "Заброшка" (Operation Abandoned)
**Жанр:** Хардкорный 3D Шутер от первого лица (FPS) с элементами выживания и эвакуации.
**Платформа:** Браузер (HTML5, WebGL).
**Формат:** Один файл `index.html` (~6350 строк), без внешних зависимостей.
**Графика:** Реалистичная, высокий уровень детализации (под RTX 3000+, 64GB RAM). 60+ FPS.

---

## 1. ГЕРОЙ И ЛЕГЕНДА
* **Персонаж:** Бандит.
* **Внешний вид:** Балаклава, бронежилет, чёрные штаны, красная футболка. 3D-модель оружия от первого лица (две руки на оружии). Режим скелета (чит-код) — 3D-скелет от третьего лица.
* **Характеристики:**
    * **Здоровье:** 100 HP (базовое). Увеличивается бронежилетом (+50 за покупку).
    * **Стамина:** Расходуется при спринте (25/сек), восстанавливается (15/сек).
    * **Скорость:** Базовая 7, спринт ×1.6, присед ×0.45, ранение ноги ×0.6.
* **Система ран:**
    * Попадание в ногу — хромота (−40% скорости, 8 сек).
    * Попадание в руку — тряска (×2.5 разброс, 6 сек).
    * Кровотечение — −2 HP/сек (10 сек), шанс 40% при попадании в тело.

## 2. ЦЕЛЬ ИГРЫ И РЕЖИМЫ

### 2.1. Основной режим (Normal)
1. **Задачи:** Убить всех солдат, собрать деньги [F].
2. **Эвакуация:** После выполнения задач — таймер 45 сек, добежать до точки выхода (EXIT на миникарте).
    * **Победа:** Добежал до выхода → экран "ПОБЕДА" → +40 монет.
    * **Если не успел:** Приезжает "Бригада зачистки" (волны: 10→20→30→40 врагов).
3. **Поражение:** HP = 0 → "Ты погиб на задании. Миссия провалена." → кнопки "Начать заново" / "В меню".

### 2.2. Джаггернаут
* Разблокируется после первой победы в основном режиме (или 5 покупок брони).
* 500 HP, миниган, бесконечные волны врагов.
* Счётчик убийств, подсчёт волн.

### 2.3. Таблица умножения (Math)
* Появляется пример умножения (например, 7×8).
* На карте враги с числами-ответами над головой.
* Найти и убить врага с правильным ответом.
* Таймер 60 сек на каждый вопрос. +20 монет за правильный ответ (×2 с апгрейдом).

### 2.4. Зомби-волны (Zombie)
* Волны зомби (зелёная кожа, без оружия, ближний бой).
* Зомби бегут к игроку, наносят ~15 урона при контакте.
* ~6 волн, нарастающая сложность.

### 2.5. Королевская битва (Battle Royale)
* Сужающаяся круговая зона, урон вне зоны.
* 15 врагов на карте. Победа = убить всех.
* Предупреждение "ВНЕ ЗОНЫ! УРОН!" красным текстом.

### 2.6. Волна обороны (Wave Defense)
* Защищать центральную точку (100 HP) 5 волн.
* Враги атакуют точку напрямую.
* Проигрыш если HP точки = 0.

### 2.7. Босс (секретный, чит-код)
* Босс "Чёрная Ошибка" — 2000 HP, глитч-эффекты, фиолетовое свечение.
* Сопротивление урону: тело ×0.5, голова макс 150.
* Награда: Глитч-пушка (конвертирует врагов в союзников).

## 3. УПРАВЛЕНИЕ

| Клавиша | Действие |
|---------|----------|
| W, A, S, D | Ходьба |
| Пробел | Прыжок |
| Ctrl | Присесть (переключатель) |
| Shift | Спринт (удерживать) |
| Shift+Ctrl | Подкат (во время спринта, 0.6 сек) |
| Q / E | Наклон влево / вправо |
| ЛКМ | Стрельба |
| ПКМ | Прицел (ADS) / Щит / Захват грав-пушкой |
| R | Перезарядка (4-фазная анимация) |
| F | Взаимодействие (лут, двери, лечение союзника, бомбы) |
| G | Захват врага (мешок → наручники) |
| H | Использовать аптечку (50 HP, стоп кровотечение) |
| 1–6 | Смена оружия (автомат / дробовик / пистолет / снайперка / глитч / грав-пушка) |
| T | Бросить гранату |
| Z | Замедление времени (3 сек, ×0.3) |
| N | Ночное зрение |
| L | Фонарик |
| V | Дрон (вид сверху, WASD полёт, 10 сек батарея) |
| C | Поставить мину |
| B | Тихое убийство (сзади врага, <2м) |
| M | Акимбо (двойные пистолеты) |
| X (удерж.) | Колесо команд союзникам |
| Tab | Переключение камер наблюдения |
| F5 | 3-е лицо (камера за спиной) |

### Паркур
* **Бег по стене:** Прыжок у стены + W → 0.8 сек бег по стене.
* **Подкат:** Спринт + Ctrl → 0.6 сек скольжение.

## 4. ОРУЖИЕ (6 видов)

| # | Название | Магазин | Запас | Урон | Темп (сек) | Перезарядка | Разброс | Особенность |
|---|----------|---------|-------|------|-----------|-------------|---------|-------------|
| 1 | Автомат | 30 | 90 | 35 | 0.12 | 1.8 | 0.02 | Стандартное |
| 2 | Дробовик | 6 | 30 | 15×8 | 0.80 | 2.5 | 0.12 | 8 дробин |
| 3 | Пистолет | 12 | 999 | 20 | 0.18 | 1.0 | 0.03 | Бесконечный запас |
| 4 | Снайперка | 5 | 25 | 200 | 1.20 | 2.8 | 0.00 | Прицел ×0.2 |
| 5 | Глитч-пушка | 20 | 100 | 45 | 0.20 | 1.5 | 0.03 | Враги → союзники |
| 6 | Грав-пушка | — | — | — | — | — | — | ПКМ захват, ЛКМ бросок |

* **Перезарядка 4 фазы:** наклон → магазин выпадает → новый вставляется → возврат.
* **Золотой скин:** Покупается в магазине, меняет цвет оружия.
* **Акимбо:** Двойные пистолеты (M), ×2 темп, ×1.5 разброс, без прицела.

## 5. БОЕВАЯ СИСТЕМА (ХАРДКОР)

### Урон
* **Попадание по игроку:** −20 HP за выстрел.
* **Попадания по зонам:**
    * Голова: 300 урон (мгновенная смерть, текст "HEADSHOT").
    * Тело: стандартный урон.
    * Нога: стандартный + хромота.
    * Рука: стандартный + тряска оружия.
* **Кровотечение:** −2 HP/сек, 10 сек, лечится аптечкой (H).

### Враги
* **ИИ (State Machine):**
    * `idle` — патрулирование, переход в бой при обнаружении.
    * `combat` — лицом к игроку, стрельба, стрейф.
    * `hurt` — оглушение после попадания, возврат в прежнее состояние.
    * `dead` — Verlet-рэгдолл (14 частиц, 21 связь), тело можно толкать.
    * `blinded` — мешок на голове, случайные движения и стрельба.
    * `captured` — наручники, следует за игроком как щит.
* **Модель врага:** ~20 боксов — каска, визор, лицо с глазами, шея, торс (2 части), ремень, руки (2 части), ноги (2 части), ладони + автомат.
* **Озвучка (English, SpeechSynthesis):** "Help me!", "I have to kill you idiot", "Fire bomb!", и т.д. Глобальный кулдаун 6 сек, без повторов.
* **Камуфляж:** Покупка в магазине добавляет 5 цветовых вариантов формы врагов.

### Захват врагов
1. Подойти к врагу → G → мешок на голову (нужен мешок из магазина).
2. Ослеплённый враг бродит и стреляет наугад.
3. G ещё раз → наручники (нужны наручники из магазина).
4. Связанный враг следует за игроком как живой щит.

## 6. СОЮЗНИКИ (7 персонажей)

| Имя | Роль | Цвет каски | Поведение |
|-----|------|-----------|-----------|
| Диана | Медик | Синий + крест | Лечит раненых |
| Павел | Защитник | Зелёный | Атакует врагов |
| Матвей | Защитник | Зелёный | Атакует врагов |
| Глеб | Защитник | Зелёный | Атакует врагов |
| Вика Ф. | Медик | Синий + крест | Лечит раненых |
| Есения К. | Медик | Синий + крест | Лечит раненых |
| Саида | Дурочка | Розовый | Бродит случайно |

* **F возле союзника:** Лечить/воскресить (тратит аптечку).
* **3D-подписи с полосками HP** над головами.
* **Команды (X удерж.):** 1-За мной, 2-Стой, 3-Атакуй, 4-Лечи.
* Отображаются на миникарте (голубые точки).
* Могут быть ранены шальными пулями врагов.

## 7. МАГАЗИН И ТОРГОВЛЯ

### Магазин (28 товаров)

**Расходники:**
| Товар | Цена | Эффект |
|-------|------|--------|
| Патроны ×60 | 5 | +60 запасных |
| Аптечка | 10 | Лечит 50HP (клав. H) |
| Гранаты ×3 | 10 | Взрыв (клав. T) |
| Мины ×3 | 12 | Ставь [C], 120 урон |
| Мешок | 8 | На голову врагу (G) |
| Наручники | 12 | Обездвижить врага (G) |

**Оружие:**
| Товар | Цена | Эффект |
|-------|------|--------|
| Дробовик | 30 | 8 дробин, клав 2 |
| Пистолет | 10 | Быстрый, клав 3 |
| Снайперка | 40 | 200 урон, клав 4 |
| Глитч-пушка | 500 | Враги→союзники, клав 5 (после босса) |
| Грав. пушка | 35 | Кидать объекты, клав 6 |

**Улучшения:**
| Товар | Цена | Эффект |
|-------|------|--------|
| Бронежилет+ | 15 | +50 макс HP |
| Улучш. Автомат | 25 | +15 урон |
| Бронебойные | 20 | Урон ×2, 1 миссия |
| ×2 Награда | 15 | 40 монет за ответ (мат. режим) |
| Заморозка | 12 | Враги стоят 15 сек |

**Снаряжение:**
| Товар | Цена | Эффект |
|-------|------|--------|
| Каска | 20 | Голова −50% урон (100 HP, изнашивается) |
| Бронежилет ТАК | 25 | Тело −40% урон (150 HP, изнашивается) |
| Наколенники | 15 | Ноги −30% урон (80 HP, изнашивается) |

**Способности:**
| Товар | Цена | Эффект |
|-------|------|--------|
| Щит | 20 | ПКМ блок 200HP |
| Замедление | 15 | Z — время ×0.3, 3 сек |
| Ночное зрение | 18 | N — зелёный фильтр |
| Фонарик | 8 | L — подсветка |
| Дрон | 30 | V — разведка 10 сек |
| Двойн. Пистолет | 25 | M — 2× скорость, 1.5× разброс |

**Косметика:**
| Товар | Цена | Эффект |
|-------|------|--------|
| Золотой скин | 50 | Золотое оружие |
| Камуфляж | 15 | Разная форма врагов |

### Торговля
* Лут с трупов врагов [F].
* Кнопка "ПРОДАТЬ ВСЁ" на экране торговли.
* Валюта — монеты (сохраняются между миссиями).

## 8. ДРОН (V)
* Покупается в магазине (30 монет).
* Вид сверху, полёт WASD.
* Батарея 10 сек. Отмечает врагов на миникарте (видимость 10 сек).
* Радиус обнаружения 25 единиц. Зелёный круг на миникарте.

## 9. ИНТЕРФЕЙС (HUD)

* **HP бар** — красная полоса (верх-лево), ширина 260px, свечение.
* **Текст HP** — "100 HP" рядом с баром, bold.
* **Патроны** — "30 / 90" (низ-право), моноширинный, 26px, свечение голубое.
* **XP-бар** — под HP, голубой градиент, "LV 1 | 0/100 XP".
* **Стамина** — низ-центр, голубая полоса (видна при <100%).
* **Миникарта** — 150×150px (низ-лево), враги (красные), союзники (голубые), бочки (оранжевые), двери (фиолетовые), мины (чёрные), камеры (голубые), игрок (белый).
* **Цели миссии** — верх-лево под XP, жёлтый текст.
* **Таймер** — верх-центр, красный 48px, моноширинный.
* **Перезарядка** — полоса под патронами, голубая.
* **Имя оружия** — над перезарядкой, серый текст.
* **Прицел** — зелёный крест с зазором в центре, свечение.
* **Маркер попадания** — красный "X" в центре, 0.3 сек.
* **HEADSHOT** — жёлтый текст 30px, тройное свечение, 0.5 сек.
* **Бодикам:** "REC" (мигающая точка), метка времени, "CAM-01 UNIT-7", сканлинии.
* **Прицел (ADS):** Круговая маска, кольца линзы, ×0.25 чувствительность мыши.
* **Шлем:** Виньетка + зелёный оттенок (при наличии каски), канвас трещин.
* **Раны:** Статус ранений (хромота, тряска, кровотечение) — верх-право.
* **Снаряжение:** Состояние каски/жилета/наколенников — рядом с HP.
* **Погода:** Текущая погода — верх-центр.
* **Зона:** "ВНЕ ЗОНЫ! УРОН!" — мигающий красный текст (Battle Royale).
* **Щит:** HP щита — справа-внизу.
* **Дрон:** "Battery: Xs | WASD | V exit" — верх-центр.
* **Мины:** "[C] Mines: X (Y/5)" — низ-лево.
* **Грав-пушка:** "[6] ГРАВ-ПУШКА [УДЕРЖ]" — справа-внизу.
* **Подсказки:** Жёлтый текст по центру с полупрозрачным фоном.

## 10. ЗВУКИ И ОЗВУЧКА (English)
* **Враги (SpeechSynthesis):**
    * При смерти игрока: *"Mission accomplished, he's dead."*
    * При ранении врага: *"Help me!", "Help me please!"*
    * В бою: *"I have to kill you idiot"*
    * Кидая гранату: *"Fire bomb!"*
* **Глобальный кулдаун:** 6 секунд между репликами, без повторов.
* **Процедурные звуки (Web Audio):** выстрелы, взрывы, шаги.

## 11. ГРАФИКА И НАСТРОЙКИ

### 4 пресета качества
| Параметр | Low | Medium | High | Ultra |
|----------|-----|--------|------|-------|
| Разрешение | 50% | 75% | 100% | 100% |
| Частицы | 50 | 150 | 300 | 500 |
| Туман | 15 | 35 | 55 | 100 |
| Тени | Выкл | Вкл | Вкл | Вкл |

### Визуальные настройки (слайдеры)
* Яркость (50–150%), Контраст (50–150%), Насыщенность (0–200%), Виньетка (0–100%).

### Спецэффекты (переключатели)
* **Неон:** Усиленная яркость, цветные накладки.
* **Дождь:** Частицы дождя + молнии.
* **Ночное зрение (N):** Зелёный фильтр.
* **Фонарик (L):** Конус света от камеры.

### Погода (динамическая)
* **Ясно** (60%), **Туман** (туман ×0.4), **Метель** (туман ×0.6, скорость ×0.7), **Песчаная буря** (туман ×0.3, скорость ×0.85).
* Смена каждые 30–60 секунд.

## 12. ЧИТ-КОДЫ (3 кода)
Вводятся в поле "ЧИТ-КОД" на экране Настроек (регистр не важен):

| Код | Эффект |
|-----|--------|
| `free pls 150` | +150 монет |
| `skelet with black gun plssss` | Режим скелета + 3-е лицо |
| `black world spawn` | Телепорт в арену босса |

## 13. РЕДАКТОР КАРТ
* Кнопка "РЕДАКТОР КАРТ" в меню.
* Инструменты: Стена / Пусто / Ящик / Враг / Деньги / Машина / Спавн.
* Рисование левой кнопкой мыши.
* Сохранение/загрузка в localStorage.
* Сброс до карты по умолчанию.
* Кнопка "ИГРАТЬ" — запуск на кастомной карте.

## 14. КАМЕРЫ НАБЛЮДЕНИЯ
* Появляются в режимах Battle Royale и Wave Defense.
* Tab — переключение между камерами.
* Голубые боксы на миникарте.
* Можно уничтожить.

## 15. СОХРАНЯЕМОЕ СОСТОЯНИЕ (между миссиями)
* **Валюта:** монеты, аптечки, гранаты, мины, мешки, наручники.
* **Прокачка:** бонус оружия, бонус брони, XP, уровень.
* **Разблокировки:** дробовик, пистолет, снайперка, щит, замедление, ночное зрение, фонарик, глитч-пушка, акимбо, дрон, грав-пушка, джаггернаут, победа над боссом.
* **Косметика:** золотой скин, камуфляж, режим скелета, 3-е лицо.
* **Снаряжение:** каска, жилет, наколенники.

**Сбрасывается каждую миссию:** враги, союзники, частицы, бочки, двери, гранаты, карта.
